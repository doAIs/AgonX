# AgonX 生产环境配置文件示例

# 应用基础配置
app:
  name: "AgonX"
  version: "0.1.0"
  debug: false  # 生产环境关闭调试
  host: "0.0.0.0"
  port: 8080

# API 配置
api:
  v1_prefix: "/api/v1"
  cors_origins:
    - "https://your-domain.com"  # 生产环境域名

# JWT 认证配置
security:
  secret_key: "${JWT_SECRET_KEY}"  # 从环境变量读取
  algorithm: "HS256"
  access_token_expire_minutes: 1440

# MySQL 数据库配置
mysql:
  host: "${MYSQL_HOST}"
  port: 3306
  user: "${MYSQL_USER}"
  password: "${MYSQL_PASSWORD}"
  database: "agonx"
  pool_size: 20
  max_overflow: 40
  pool_recycle: 3600

# Redis 配置
redis:
  host: "${REDIS_HOST}"
  port: 6379
  db: 0
  password: "${REDIS_PASSWORD}"
  decode_responses: true

# Milvus 向量数据库配置
milvus:
  host: "${MILVUS_HOST}"
  port: 19530
  user: "${MILVUS_USER}"
  password: "${MILVUS_PASSWORD}"
  embedding_dimension: 1024

# MinIO 对象存储配置
minio:
  endpoint: "${MINIO_ENDPOINT}"
  access_key: "${MINIO_ACCESS_KEY}"
  secret_key: "${MINIO_SECRET_KEY}"
  secure: true  # 生产环境使用 HTTPS
  bucket_name: "agonx-documents"

# Embedding 模型配置
embedding:
  model: "BAAI/bge-m3"
  device: "cuda"  # 生产环境使用 GPU
  cache_folder: "/models"

# LLM 模型配置
llm:
  default_provider: "openai"
  default_model: "gpt-4"
  temperature: 0.7
  max_tokens: 2000
  timeout: 60

# 支持的模型提供商
providers:
  openai:
    base_url: "https://api.openai.com/v1"
  deepseek:
    base_url: "https://api.deepseek.com"
  qwen:
    base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  zhipu:
    base_url: "https://open.bigmodel.cn/api/paas/v4/"

# 知识库配置
knowledge:
  chunk_size: 512
  chunk_overlap: 50
  top_k: 10
  top_n: 5
  similarity_threshold: 0.7
  search_mode: "hybrid"
  rerank_enabled: true

# 日志配置
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "/var/log/agonx/agonx.log"
  max_bytes: 10485760
  backup_count: 10

# 文件上传配置
upload:
  max_file_size: 52428800
  allowed_extensions:
    - ".pdf"
    - ".txt"
    - ".md"
    - ".doc"
    - ".docx"
  temp_folder: "/tmp/agonx"
