# AgonX 后端配置文件

# 应用基础配置
app:
  name: "AgonX"
  version: "0.1.0"
  debug: true
  host: "0.0.0.0"
  port: 8080

# API 配置
api:
  v1_prefix: "/api/v1"
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:3001"
    - "http://127.0.0.1:3000"
    - "http://127.0.0.1:3001"

# JWT 认证配置
security:
  secret_key: "your-secret-key-change-in-production"  # 生产环境务必修改
  algorithm: "HS256"
  access_token_expire_minutes: 1440  # 24小时

# MySQL 数据库配置
mysql:
  host: "localhost"
  port: 3306
  user: "agonx"
  password: "agonx_password"
  database: "agonx"
  pool_size: 10
  max_overflow: 20
  pool_recycle: 3600

# Redis 配置
redis:
  host: "localhost"
  port: 6379
  db: 0
  password: null
  decode_responses: true

# Milvus 向量数据库配置
milvus:
  host: "localhost"
  port: 19530
  user: null
  password: null
  embedding_dimension: 1024  # BGE-M3 默认维度

# MinIO 对象存储配置
minio:
  endpoint: "localhost:19000"  # 注意：这里不要加 http://
  access_key: "minioadmin"
  secret_key: "minioadmin"
  secure: false
  bucket_name: "agonx-documents"

# Embedding 模型配置
embedding:
  model: "BAAI/bge-m3"
  device: "cpu"  # 可选: cpu, cuda
  cache_folder: "./models"

# LLM 模型配置 (默认模型)
llm:
  default_provider: "openai"
  default_model: "gpt-3.5-turbo"
  temperature: 0.7
  max_tokens: 2000
  timeout: 60

# 支持的模型提供商
providers:
  openai:
    base_url: "https://api.openai.com/v1"
  deepseek:
    base_url: "https://api.deepseek.com"
  qwen:
    base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  zhipu:
    base_url: "https://open.bigmodel.cn/api/paas/v4/"

# 知识库配置
knowledge:
  chunk_size: 512
  chunk_overlap: 50
  top_k: 10
  top_n: 5
  similarity_threshold: 0.7
  search_mode: "hybrid"  # vector, keyword, hybrid
  rerank_enabled: true

# 日志配置
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/agonx.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# 文件上传配置
upload:
  max_file_size: 52428800  # 50MB
  allowed_extensions:
    - ".pdf"
    - ".txt"
    - ".md"
    - ".doc"
    - ".docx"
  temp_folder: "./temp"
